(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2982)}])},188:function(e,t,r){"use strict";r.d(t,{T:function(){return Logo}});var n=r(5893),s=r(2734);let Logo=()=>{let e=(0,s.Z)(),t=e.palette.primary.main;return(0,n.jsxs)("svg",{fill:"none",height:"100%",viewBox:"0 0 24 24",width:"100%",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{opacity:.16,d:"M7.242 11.083c.449-1.674 2.17-3.394 3.843-3.843l10.434-2.796c1.673-.448 2.666.545 2.218 2.218L20.94 17.096c-.449 1.674-2.17 3.394-3.843 3.843L6.664 23.735c-1.673.448-2.666-.545-2.218-2.218l2.796-10.434Z",fill:t}),(0,n.jsx)("path",{d:"M3.06 6.9c.448-1.674 2.168-3.394 3.842-3.843L17.336.261c1.673-.448 2.667.545 2.218 2.218l-2.796 10.434c-.449 1.674-2.169 3.394-3.843 3.843L2.481 19.552C.808 20-.185 19.007.263 17.334L3.06 6.9Z",fill:t})]})}},580:function(e,t,r){"use strict";r.d(t,{L:function(){return l}});var n=r(2729),s=r(4096),o=r(948);function _templateObject(){let e=(0,n._)([""]);return _templateObject=function(){return e},e}let l=(0,o.ZP)(s.Z)(_templateObject())},2042:function(e,t,r){"use strict";r.d(t,{a:function(){return useAuth}});var n=r(7294),s=r(9690);let useAuth=()=>(0,n.useContext)(s.Vo)},8115:function(e,t,r){"use strict";r.d(t,{A:function(){return z}});var n,s=r(5893),o=r(7294),l=r(9332),i=r(948),a=r(1163),c=r(5697),d=r.n(c),u=r(9690);let AuthGuard=e=>{let{children:t}=e,r=(0,a.useRouter)(),{isAuthenticated:n}=(0,u.Eu)(),s=(0,o.useRef)(!1),[l,i]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{r.isReady&&!s.current&&(s.current=!0,n?i(!0):(console.log("Not authenticated, redirecting"),r.replace({pathname:"/auth/login",query:"/"!==r.asPath?{continueUrl:r.asPath}:void 0}).catch(console.error)))},[r.isReady]),l)?t:null};AuthGuard.propTypes={children:d().node};var h=r(1664),p=r.n(h),x=r(8396),j=r(7357),g=r(7720),f=r(6447),m=r(7533),v=r(188),Z=r(580),b=r(9773),w=r(1402),y=r(3219);let C=[{title:"Overview",path:"/",icon:(0,s.jsx)(y.Z,{fontSize:"small",children:(0,s.jsx)(b.Z,{})})},{title:"Map",path:"/map",icon:(0,s.jsx)(y.Z,{fontSize:"small",children:(0,s.jsx)(w.Z,{})})}];var S=r(8879);let SideNavItem=e=>{let{active:t=!1,disabled:r,external:n,icon:o,path:l,title:i}=e,a=l?n?{component:"a",href:l,target:"_blank"}:{component:p(),href:l}:{};return(0,s.jsx)("li",{children:(0,s.jsxs)(S.Z,{sx:{alignItems:"center",borderRadius:1,display:"flex",justifyContent:"flex-start",pl:"16px",pr:"16px",py:"6px",textAlign:"left",width:"100%",...t&&{backgroundColor:"rgba(255, 255, 255, 0.04)"},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.04)"}},...a,children:[o&&(0,s.jsx)(j.Z,{component:"span",sx:{alignItems:"center",color:"neutral.400",display:"inline-flex",justifyContent:"center",mr:2,...t&&{color:"primary.main"}},children:o}),(0,s.jsx)(j.Z,{component:"span",sx:{color:"neutral.400",flexGrow:1,fontFamily:e=>e.typography.fontFamily,fontSize:14,fontWeight:600,lineHeight:"24px",whiteSpace:"nowrap",...t&&{color:"common.white"},...r&&{color:"neutral.500"}},children:i})]})})};SideNavItem.propTypes={active:d().bool,disabled:d().bool,external:d().bool,icon:d().node,path:d().string,title:d().string.isRequired};let SideNav=e=>{let{open:t,onClose:r}=e,n=(0,l.usePathname)(),o=(0,x.Z)(e=>e.breakpoints.up("lg")),i=(0,s.jsx)(Z.L,{sx:{height:"100%","& .simplebar-content":{height:"100%"},"& .simplebar-scrollbar:before":{background:"neutral.400"}},children:(0,s.jsxs)(j.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,s.jsx)(j.Z,{sx:{p:3},children:(0,s.jsx)(j.Z,{component:p(),href:"/",sx:{display:"inline-flex",height:32,width:32},children:(0,s.jsx)(v.T,{})})}),(0,s.jsx)(g.Z,{sx:{borderColor:"neutral.700"}}),(0,s.jsx)(j.Z,{component:"nav",sx:{flexGrow:1,px:2,py:3},children:(0,s.jsx)(f.Z,{component:"ul",spacing:.5,sx:{listStyle:"none",p:0,m:0},children:C.map(e=>{let t=!!e.path&&n===e.path;return(0,s.jsx)(SideNavItem,{active:t,disabled:e.disabled,external:e.external,icon:e.icon,path:e.path,title:e.title},e.title)})})}),(0,s.jsx)(g.Z,{sx:{borderColor:"neutral.700"}})]})});return o?(0,s.jsx)(m.ZP,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"neutral.800",color:"common.white",width:280}},variant:"permanent",children:i}):(0,s.jsx)(m.ZP,{anchor:"left",onClose:r,open:t,PaperProps:{sx:{backgroundColor:"neutral.800",color:"common.white",width:280}},sx:{zIndex:e=>e.zIndex.appBar+100},variant:"temporary",children:i})};SideNav.propTypes={onClose:d().func,open:d().bool};var k=r(4149),P=r(4674),O=r(9661),R=r(1796),T=r(5724),_=r(5861),I=r(2096),E=r(3599),N=r(2042);let AccountPopover=e=>{let{anchorEl:t,onClose:r,open:n}=e,i=(0,l.useRouter)(),a=(0,N.a)(),c=(0,o.useCallback)(()=>{null==r||r(),a.signOut(),i.push("/auth/login")},[r,a,i]);return(0,s.jsxs)(T.ZP,{anchorEl:t,anchorOrigin:{horizontal:"left",vertical:"bottom"},onClose:r,open:n,PaperProps:{sx:{width:200}},children:[(0,s.jsxs)(j.Z,{sx:{py:1.5,px:2},children:[(0,s.jsx)(_.Z,{variant:"overline",children:"Account"}),(0,s.jsx)(_.Z,{color:"text.secondary",variant:"body2",children:"Anika Visser"})]}),(0,s.jsx)(g.Z,{}),(0,s.jsx)(I.Z,{disablePadding:!0,dense:!0,sx:{p:"8px","& > *":{borderRadius:1}},children:(0,s.jsx)(E.Z,{onClick:c,children:"Sign out"})})]})};AccountPopover.propTypes={anchorEl:d().any,onClose:d().func,open:d().bool.isRequired};let TopNav=e=>{let{onNavOpen:t}=e,r=(0,x.Z)(e=>e.breakpoints.up("lg")),n=function(){let e=(0,o.useRef)(null),[t,r]=(0,o.useState)(!1),n=(0,o.useCallback)(()=>{r(!0)},[]),s=(0,o.useCallback)(()=>{r(!1)},[]),l=(0,o.useCallback)(()=>{r(e=>!e)},[]);return{anchorRef:e,handleClose:s,handleOpen:n,handleToggle:l,open:t}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{component:"header",sx:{backdropFilter:"blur(6px)",backgroundColor:e=>(0,R.Fq)(e.palette.background.default,.8),position:"sticky",left:{lg:"".concat(280,"px")},top:0,width:{lg:"calc(100% - ".concat(280,"px)")},zIndex:e=>e.zIndex.appBar},children:(0,s.jsxs)(f.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{minHeight:64,px:2},children:[(0,s.jsx)(f.Z,{alignItems:"center",direction:"row",spacing:2,children:!r&&(0,s.jsx)(P.Z,{onClick:t,children:(0,s.jsx)(y.Z,{fontSize:"small",children:(0,s.jsx)(k.Z,{})})})}),(0,s.jsx)(f.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,s.jsx)(O.Z,{onClick:n.handleOpen,ref:n.anchorRef,sx:{cursor:"pointer",height:40,width:40},src:"/assets/avatars/sun.jpg"})})]})}),(0,s.jsx)(AccountPopover,{anchorEl:n.anchorRef.current,open:n.open,onClose:n.handleClose})]})};TopNav.propTypes={onNavOpen:d().func};let A=(0,i.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flex:"1 1 auto",maxWidth:"100%",[t.breakpoints.up("lg")]:{paddingLeft:280}}}),L=(0,i.ZP)("div")({display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"}),z=(n=e=>{let{children:t}=e,r=(0,l.usePathname)(),[n,i]=(0,o.useState)(!1),a=(0,o.useCallback)(()=>{n&&i(!1)},[n]);return(0,o.useEffect)(()=>{a()},[r]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(TopNav,{onNavOpen:()=>i(!0)}),(0,s.jsx)(SideNav,{onClose:()=>i(!1),open:n}),(0,s.jsx)(A,{children:(0,s.jsx)(L,{children:t})})]})},e=>(0,s.jsx)(AuthGuard,{children:(0,s.jsx)(n,{...e})}))},2982:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n=r(5893),s=r(9008),o=r.n(s),l=r(7357),i=r(5582),a=r(1426),c=r(8115),d=r(5697),u=r.n(d),h=r(7805),p=r(6242),x=r(4267),j=r(6447),g=r(5861),f=r(9661),m=r(3219);let OverviewBudget=e=>{let{difference:t,positive:r=!1,sx:s,value:o}=e;return(0,n.jsx)(p.Z,{sx:s,children:(0,n.jsx)(x.Z,{children:(0,n.jsxs)(j.Z,{alignItems:"flex-start",direction:"row",justifyContent:"space-between",spacing:3,children:[(0,n.jsxs)(j.Z,{spacing:1,children:[(0,n.jsx)(g.Z,{color:"text.secondary",variant:"overline",children:"Revenue per year"}),(0,n.jsx)(g.Z,{variant:"h4",children:o})]}),(0,n.jsx)(f.Z,{sx:{backgroundColor:"error.main",height:56,width:56},children:(0,n.jsx)(m.Z,{children:(0,n.jsx)(h.Z,{})})})]})})})};OverviewBudget.prototypes={difference:u().number,positive:u().bool,sx:u().object,value:u().string.isRequired};var v=r(6207),Z=r(2743),b=r(8445),w=r(3321),y=r(7720),C=r(2023),S=r(2734),k=r(1796),P=r(2729),O=r(5152),R=r.n(O),T=r(948);function _templateObject(){let e=(0,P._)([""]);return _templateObject=function(){return e},e}let _=R()(()=>Promise.all([r.e(279),r.e(229)]).then(r.bind(r,7229)),{loadableGenerated:{webpack:()=>[7229]},ssr:!1,loading:()=>null}),I=(0,T.ZP)(_)(_templateObject()),useChartOptions=()=>{let e=(0,S.Z)();return{chart:{background:"transparent",stacked:!1,toolbar:{show:!1}},colors:[e.palette.primary.main,(0,k.Fq)(e.palette.primary.main,.25)],dataLabels:{enabled:!1},fill:{opacity:1,type:"solid"},grid:{borderColor:e.palette.divider,strokeDashArray:2,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},legend:{show:!1},plotOptions:{bar:{columnWidth:"40px"}},stroke:{colors:["red"],show:!0,width:5},theme:{mode:e.palette.mode},xaxis:{axisBorder:{color:e.palette.divider,show:!0},axisTicks:{color:e.palette.divider,show:!0},categories:["0","5","10","15","20","25","30","35","40","45","50","55"],labels:{offsetY:5,style:{colors:e.palette.text.secondary}}},yaxis:{labels:{formatter:e=>e>0?"".concat(e,"K"):"".concat(e),offsetX:-10,style:{colors:e.palette.text.secondary}}}}},OverviewSales=e=>{let{chartSeries:t,sx:r}=e,s=useChartOptions();return(0,n.jsxs)(p.Z,{sx:r,children:[(0,n.jsx)(b.Z,{action:(0,n.jsx)(w.Z,{color:"inherit",size:"small",startIcon:(0,n.jsx)(m.Z,{fontSize:"small",children:(0,n.jsx)(v.Z,{})}),children:"Sync"}),title:"Revenue Generated"}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(I,{height:350,options:s,series:t,type:"line",width:"100%"})}),(0,n.jsx)(y.Z,{}),(0,n.jsx)(C.Z,{sx:{justifyContent:"flex-end"},children:(0,n.jsx)(w.Z,{color:"inherit",endIcon:(0,n.jsx)(m.Z,{fontSize:"small",children:(0,n.jsx)(Z.Z,{})}),size:"small",children:"Overview"})})]})};OverviewSales.protoTypes={chartSeries:u().array.isRequired,sx:u().object},r(5286),u().number.isRequired,u().object;var E=r(3426),N=r(2148),A=r(4727);let OverviewTotalCustomers=e=>{let{difference:t,positive:r=!1,sx:s,value:o}=e;return(0,n.jsx)(p.Z,{sx:s,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsxs)(j.Z,{alignItems:"flex-start",direction:"row",justifyContent:"space-between",spacing:3,children:[(0,n.jsxs)(j.Z,{spacing:1,children:[(0,n.jsx)(g.Z,{color:"text.secondary",variant:"overline",children:"Energy to Grid"}),(0,n.jsx)(g.Z,{variant:"h4",children:o})]}),(0,n.jsx)(f.Z,{sx:{backgroundColor:"success.main",height:56,width:56},children:(0,n.jsx)(m.Z,{children:(0,n.jsx)(A.Z,{})})})]}),t&&(0,n.jsxs)(j.Z,{alignItems:"center",direction:"row",spacing:2,sx:{mt:2},children:[(0,n.jsxs)(j.Z,{alignItems:"center",direction:"row",spacing:.5,children:[(0,n.jsx)(m.Z,{color:r?"success":"error",fontSize:"small",children:r?(0,n.jsx)(N.Z,{}):(0,n.jsx)(E.Z,{})}),(0,n.jsxs)(g.Z,{color:r?"success.main":"error.main",variant:"body2",children:[t,"%"]})]}),(0,n.jsx)(g.Z,{color:"text.secondary",variant:"caption",children:"Since last month"})]})]})})};OverviewTotalCustomers.propTypes={difference:u().number,positive:u().bool,value:u().string.isRequired,sx:u().object};let OverviewTotalProfit=e=>{let{value:t,sx:r}=e;return(0,n.jsx)(p.Z,{sx:r,children:(0,n.jsx)(x.Z,{children:(0,n.jsxs)(j.Z,{alignItems:"flex-start",direction:"row",justifyContent:"space-between",spacing:3,children:[(0,n.jsxs)(j.Z,{spacing:1,children:[(0,n.jsx)(g.Z,{color:"text.secondary",variant:"overline",children:"Constr To Labor"}),(0,n.jsx)(g.Z,{variant:"h4",children:t})]}),(0,n.jsx)(f.Z,{sx:{backgroundColor:"primary.main",height:56,width:56},children:(0,n.jsx)(m.Z,{children:(0,n.jsx)(h.Z,{})})})]})})})};OverviewTotalProfit.propTypes={value:u().string,sx:u().object};var L=r(108),z=r(7294),U=r(1955),q=r(3454);let G=q.env.NEXT_PUBLIC_API_KEY,B=q.env.NEXT_PUBLIC_G_API_KEY;console.log(G);let F=new L.g6("https://gateway-external.1build.com/",{headers:{"1build-api-key":G}}),Page=()=>{let[e,t]=(0,z.useState)(null),[r,s]=(0,z.useState)([]),[c,d]=(0,z.useState)("idle"),[u,h]=(0,z.useState)(0),[p,x]=(0,z.useState)(0),[j,g]=(0,z.useState)(0),[f,m]=(0,z.useState)(0);async function fetchVars(){let e=U.Z.get("Address"),r=parseInt(U.Z.get("Area"),10);try{d("loading");let n=await fetch("https://main-bvxea6i-c53ehmp33lr66.us.platformsh.site/data/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,square_feet:r})});if(n.ok){let e=await n.json();return t(e),d("success"),e}console.error("Failed to fetch data"),d("error")}catch(e){console.error("Error:",e),d("error")}}async function fetchData(e,t){console.log(t);let r={input:{zipcode:t["Zip Code"],searchTerm:e,page:{limit:1}}};try{let t=await F.request("\n    query sources($input: SourceSearchInput!) {\n      sources(input: $input) {\n        nodes {\n          calculatedUnitRateUsdCents\n        }\n      }\n    }\n  ",r),{calculatedUnitRateUsdCents:n}=t.sources.nodes[0];return{searchTerm:e,calculatedUnitRate:n}}catch(e){console.error("Error fetching data:",e)}}async function fetchPricing(e){let t="https://developer.nrel.gov/api/utility_rates/v3.json?api_key=".concat(B,"&lat=").concat(e.latitude,"&lon=").concat(e.longitude);try{let e=await fetch(t);if(!e.ok)throw Error("Network response was not ok");let r=await e.json();return r}catch(e){return console.error("There was a problem with the fetch operation:",e),null}}async function getResults(){let e=[],t=await fetchVars();for(let r of["concrete pad footing 24","3000","#5 rebar","#4 Rebar","4000","W24 X 55","EPDM"]){let n=await fetchData(r,t);n&&e.push(n)}s(e),console.log(e);let r=[...e].sort((e,t)=>e.searchTerm.localeCompare(t.searchTerm)),n=await fetchPricing(t);console.log(r);let o=0;g(o=(r[0].calculatedUnitRate+r[1].calculatedUnitRate+8*r[2].calculatedUnitRate+185*r[3].calculatedUnitRate+4*r[4].calculatedUnitRate+40*r[5].calculatedUnitRate+4*r[6].calculatedUnitRate)/100),o+=1440*t["System Size (KW)"],m(t["KWH per year"]);let l=t["KWH per year"]*n.outputs.commercial;h(o),x(l)}(0,z.useEffect)(()=>{console.log("Running useEffect"),getResults()},[]),console.log(p);let v=((e,t,r,n,s)=>{let o=[];for(let t=0;t<60;t+=5){let r=e*Math.pow(1.05,t);r=Math.round(r=Math.round(r)/1e3),o.push(r)}return o})(p,0,0,0,0),Z=(e=>{let t=[];e/=1e3,e=Math.round(e);for(let r=0;r<12;r+=1)t.push(e);return t})(u);console.log(Z);let b=p.toLocaleString(),w=j.toLocaleString(),y="".concat(f," KWH").toLocaleString();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(),{children:(0,n.jsx)("title",{children:"Overview | SolarEstimation"})}),(0,n.jsx)(l.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,n.jsx)(i.Z,{maxWidth:"xl",children:(0,n.jsxs)(a.Z,{container:!0,spacing:3,children:[(0,n.jsx)(a.Z,{xs:12,sm:6,lg:3,children:(0,n.jsx)(OverviewBudget,{difference:12,positive:!0,sx:{height:"100%"},value:b})}),(0,n.jsx)(a.Z,{xs:12,sm:6,lg:3,children:(0,n.jsx)(OverviewTotalProfit,{sx:{height:"100%"},value:w})}),(0,n.jsx)(a.Z,{xs:12,sm:6,lg:3}),(0,n.jsx)(a.Z,{xs:12,sm:6,lg:3,children:(0,n.jsx)(OverviewTotalCustomers,{sx:{height:"100%"},value:y})}),(0,n.jsx)(a.Z,{xs:12,lg:12,children:(0,n.jsx)(OverviewSales,{chartSeries:[{name:"Project Revenue",data:v,type:"line"},{name:"Cost",data:Z}],sx:{height:"900%"}})}),(0,n.jsx)(a.Z,{xs:12,md:12,lg:8})]})})})]})};Page.getLayout=e=>(0,n.jsx)(c.A,{children:e});var W=Page}},function(e){e.O(0,[540,199,39,210,824,464,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);